(function(){"use strict";var t={964:function(t,e,o){var s=o(5130),r=o(6768);const a={id:"app"};function n(t,e,o,s,n,l){const i=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.CE)("div",a,[(0,r.bF)(i)])}var l={name:"App",components:{}},i=o(1241);const u=(0,i.A)(l,[["render",n]]);var c=u,d=o(1387),p=o(4232);const g={class:"blog-container"},m={class:"blog-header"},h={class:"header-buttons"},v={class:"main-content"},L={class:"post-list"},b={class:"post-meta"},k={class:"author"},f={class:"meta-right"},y={class:"date"},w={class:"views"},P=["innerHTML"];function S(t,e,o,s,a,n){return(0,r.uX)(),(0,r.CE)("div",g,[(0,r.Lk)("header",m,[(0,r.Lk)("button",{class:"menu-button",onClick:e[0]||(e[0]=(...t)=>n.goToPostList&&n.goToPostList(...t))},"목록"),e[4]||(e[4]=(0,r.Lk)("h1",{class:"blog-title"},"Blog Project",-1)),(0,r.Lk)("div",h,[a.isLoggedIn?((0,r.uX)(),(0,r.CE)("button",{key:1,class:"action-button",onClick:e[2]||(e[2]=(...t)=>n.logout&&n.logout(...t))},"로그아웃")):((0,r.uX)(),(0,r.CE)("button",{key:0,class:"action-button",onClick:e[1]||(e[1]=(...t)=>n.goToUserLogin&&n.goToUserLogin(...t))},"로그인")),a.isLoggedIn?((0,r.uX)(),(0,r.CE)("button",{key:2,class:"action-button",onClick:e[3]||(e[3]=(...t)=>n.goToCreatePage&&n.goToCreatePage(...t))},"글작성")):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",v,[(0,r.Lk)("main",L,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.sortedPost,(t=>((0,r.uX)(),(0,r.CE)("div",{key:t.id,class:"post-item"},[(0,r.Lk)("h2",null,(0,p.v_)(t.title),1),(0,r.Lk)("div",b,[(0,r.Lk)("p",k,"글쓴이 : "+(0,p.v_)(t.name),1),(0,r.Lk)("div",f,[(0,r.Lk)("p",y,"작성일 : "+(0,p.v_)(n.formatDate(t.created_at)),1),(0,r.Lk)("p",w,"조회수 : "+(0,p.v_)(t.views),1)])]),(0,r.Lk)("p",{innerHTML:t.content},null,8,P)])))),128))])])])}o(4114);var X={name:"BlogMain",data(){return{posts:[{id:1,title:"",content:"",author:"",date:"",views:1}],previewVisible:!1,isLoggedIn:!!localStorage.getItem("currentUser")}},computed:{sortedPost(){return[...this.posts].sort(((t,e)=>e.views-t.views)).slice(0,2)}},mounted(){fetch("http://localhost:3000/list").then((t=>t.json())).then((t=>{this.posts=t.sort(((t,e)=>e.views-t.views))})).catch((t=>console.error("Error fetching posts:",t))),window.addEventListener("storage",this.syncLoginState)},methods:{onDragStart(t){t.dataTransfer.setData("text","menu-button")},onDrop(t){const e=t.dataTransfer.getData("text");"menu-button"===e&&(this.previewVisible=!0)},logout(){localStorage.removeItem("currentUser"),this.isLoggedIn=!1,alert("로그아웃 되었습니다.")},syncLoginState(t){"currentUser"===t.key&&(this.isLoggedIn=!!localStorage.getItem("currentUser"))},goToCreatePage(){this.$router.push("/create")},goToUserLogin(){this.$router.push("/login")},goToPostList(){this.$router.push("/list")},formatDate(t){const e=new Date(t),o=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),a=String(e.getHours()).padStart(2,"0"),n=String(e.getMinutes()).padStart(2,"0");return`${o}-${s}-${r} ${a}:${n}`}},beforeUnmount(){window.removeEventListener("storage",this.syncLoginState)}};const C=(0,i.A)(X,[["render",S],["__scopeId","data-v-58afef4e"]]);var I=C;const U={class:"container"},D={class:"login-container"},A={class:"button-group"};function E(t,e,o,a,n,l){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",U,[(0,r.Lk)("h1",null,[(0,r.bF)(i,{to:"/",class:"blog-title"},{default:(0,r.k6)((()=>e[4]||(e[4]=[(0,r.eW)("BlogProject")]))),_:1})]),(0,r.Lk)("div",D,[e[8]||(e[8]=(0,r.Lk)("h2",null,"Login",-1)),(0,r.Lk)("form",{onSubmit:e[3]||(e[3]=(0,s.D$)(((...t)=>l.login&&l.login(...t)),["prevent"])),id:"login-form"},[e[6]||(e[6]=(0,r.Lk)("label",{for:"userId"},"아이디",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",name:"userId","onUpdate:modelValue":e[0]||(e[0]=t=>n.email=t),placeholder:"아이디를 입력하세요."},null,512),[[s.Jo,n.email]]),e[7]||(e[7]=(0,r.Lk)("label",{for:"userPassword"},"비밀번호",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",name:"userPassword","onUpdate:modelValue":e[1]||(e[1]=t=>n.password=t),placeholder:"비밀번호를 입력하세요."},null,512),[[s.Jo,n.password]]),(0,r.Lk)("div",A,[e[5]||(e[5]=(0,r.Lk)("button",{type:"submit",class:"submit-button"},"Login",-1)),(0,r.Lk)("button",{type:"button",class:"signup-button",onClick:e[2]||(e[2]=(...t)=>l.goToSignUp&&l.goToSignUp(...t))},"회원가입")])],32)])])}var O=o(4373),N={name:"UserLogin",data(){return{email:"",password:""}},methods:{goToSignUp(){this.$router.push("/signup")},login(){const t={id:this.email,password:this.password};O.A.post("http://localhost:3000/login",t).then((t=>{alert(t.data.message),t.data.user&&(console.log("로그인된 사용자:",t.data.user),localStorage.setItem("currentUser",JSON.stringify(t.data.user)),window.dispatchEvent(new Event("storage")),this.$router.push("/"))})).catch((t=>{console.error("로그인 오류:",t),alert("로그인 실패! 아이디와 비밀번호를 확인하세요.")}))}}};const V=(0,i.A)(N,[["render",E]]);var F=V;const J={class:"container"},H={class:"signup-container"};function T(t,e,o,a,n,l){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",J,[(0,r.bF)(i,{to:"/",class:"blogTitle"},{default:(0,r.k6)((()=>e[5]||(e[5]=[(0,r.eW)("BlogProject")]))),_:1}),(0,r.Lk)("div",H,[e[11]||(e[11]=(0,r.Lk)("h2",null,"회원가입",-1)),(0,r.Lk)("form",{onSubmit:e[4]||(e[4]=(0,s.D$)(((...t)=>l.submitForm&&l.submitForm(...t)),["prevent"])),id:"signup-form"},[(0,r.Lk)("div",null,[e[6]||(e[6]=(0,r.Lk)("label",{for:"name"},"닉네임",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",id:"name","onUpdate:modelValue":e[0]||(e[0]=t=>n.name=t),placeholder:"사용하실 닉네임을 입력하세요."},null,512),[[s.Jo,n.name]])]),(0,r.Lk)("div",null,[e[7]||(e[7]=(0,r.Lk)("label",{for:"id"},"아이디",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",id:"email","onUpdate:modelValue":e[1]||(e[1]=t=>n.email=t),placeholder:"사용하실 아이디를 입력하세요."},null,512),[[s.Jo,n.email]])]),(0,r.Lk)("div",null,[e[8]||(e[8]=(0,r.Lk)("label",{for:"password"},"비밀번호",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":e[2]||(e[2]=t=>n.password=t),placeholder:"사용하실 비밀번호를 입력하세요."},null,512),[[s.Jo,n.password]])]),(0,r.Lk)("div",null,[e[9]||(e[9]=(0,r.Lk)("label",{for:"passwordConfirm"},"비밀번호 확인",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",id:"passwordConfirm","onUpdate:modelValue":e[3]||(e[3]=t=>n.passwordConfirm=t),placeholder:"비밀번호를 한번 더 입력하세요."},null,512),[[s.Jo,n.passwordConfirm]])]),e[10]||(e[10]=(0,r.Lk)("button",{type:"submit",class:"signUp-button"},"회원가입",-1))],32)])])}var q={name:"SignUp",data(){return{name:"",email:"",password:"",passwordConfirm:""}},methods:{submitForm(){if(this.password!==this.passwordConfirm)return void alert("비밀번호가 일치하지 않습니다. 다시 확인해주세요.");const t={name:this.name,id:this.email,password:this.password};O.A.post("http://localhost:3000/signup",t).then((t=>{alert(t.data.message),this.$router.push("/")})).catch((t=>{console.error("회원가입 오류:",t),alert("회원가입에 실패했습니다. 다시 시도해주세요.")}))}}};const B=(0,i.A)(q,[["render",T]]);var W=B;const j={class:"create-post-container"},K={class:"input-group"};function M(t,e,o,a,n,l){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",j,[(0,r.Lk)("header",null,[(0,r.Lk)("h1",null,[(0,r.bF)(i,{to:"/",class:"blog_title"},{default:(0,r.k6)((()=>e[3]||(e[3]=[(0,r.eW)("BlogProject")]))),_:1})]),(0,r.Lk)("button",{class:"logout-button",onClick:e[0]||(e[0]=(...t)=>l.logout&&l.logout(...t))},"로그아웃")]),e[6]||(e[6]=(0,r.Lk)("h2",{class:"create-post-title"},"글작성",-1)),(0,r.Lk)("form",{onSubmit:e[2]||(e[2]=(0,s.D$)(((...t)=>l.submitPost&&l.submitPost(...t)),["prevent"])),class:"post-form"},[(0,r.Lk)("div",K,[e[4]||(e[4]=(0,r.Lk)("label",{for:"title"},"제목",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>n.title=t),id:"title",placeholder:"제목을 입력하세요.",required:""},null,512),[[s.Jo,n.title]])]),e[5]||(e[5]=(0,r.Fv)('<div class="input-group" data-v-fb0b619a><label for="content" data-v-fb0b619a>내용</label><div id="editor" data-v-fb0b619a></div></div><div class="inputfile" data-v-fb0b619a><input type="file" name="boardfile" id="inputFile" data-v-fb0b619a></div><button type="submit" class="complete-button" data-v-fb0b619a>작성 완료</button>',3))],32)])}var R=o(8525),x={name:"CreatePost",data(){return{title:"",content:""}},methods:{submitPost(){const t=JSON.parse(localStorage.getItem("currentUser"));if(!t||!t.name||!t.email)return alert.apply("로그인이 필요합니다."),void this.$router.push("/login");this.content=this.editor.root.innerHTML;const e={id:Date.now(),name:t.name,email:t.email,title:this.title,content:this.content,date:(new Date).toISOString(),views:0};O.A.post("http://localhost:3000/create",e).then((()=>{this.$router.push("/list")})).catch((t=>{console.error("게시물 생성 중 오류 발생:",t),alert("게시물 생성에 실패했습니다.")}))},logout(){localStorage.removeItem("user"),this.$router.push("/login")}},mounted(){this.editor=new R.Ay("#editor",{theme:"snow",placeholder:"내용을 입력하세요.",modules:{toolbar:[["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["link","image"],[{align:[]}],[{size:["small",!1,"large","huge"]}],[{color:[]},{background:[]}]]}})}};const $=(0,i.A)(x,[["render",M],["__scopeId","data-v-fb0b619a"]]);var z=$;const G={class:"navbar"},Q={class:"edit-post-container"},Z={class:"input-group"},Y={class:"button-group"};function _(t,e,o,a,n,l){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",G,[(0,r.Lk)("header",null,[(0,r.Lk)("h1",null,[(0,r.bF)(i,{to:"/",class:"blog_title"},{default:(0,r.k6)((()=>e[5]||(e[5]=[(0,r.eW)("BlogProject")]))),_:1})]),n.isLoggedIn?((0,r.uX)(),(0,r.CE)("button",{key:1,class:"logout-button",onClick:e[1]||(e[1]=(...t)=>l.logout&&l.logout(...t))},"로그아웃")):((0,r.uX)(),(0,r.CE)("button",{key:0,class:"logout-button",onClick:e[0]||(e[0]=(...t)=>l.goToUserLogin&&l.goToUserLogin(...t))}," 로그인 "))])]),(0,r.Lk)("div",Q,[e[9]||(e[9]=(0,r.Lk)("h1",null,"글 수정",-1)),(0,r.Lk)("form",{onSubmit:e[4]||(e[4]=(0,s.D$)(((...t)=>l.submitPost&&l.submitPost(...t)),["prevent"]))},[(0,r.Lk)("div",Z,[e[6]||(e[6]=(0,r.Lk)("label",{for:"title"},"제목",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>n.title=t),id:"title",required:""},null,512),[[s.Jo,n.title]])]),e[8]||(e[8]=(0,r.Lk)("div",{class:"input-group"},[(0,r.Lk)("label",{for:"content"},"내용"),(0,r.Lk)("div",{id:"editor"})],-1)),(0,r.Lk)("div",Y,[(0,r.Lk)("button",{type:"button",onClick:e[3]||(e[3]=(...t)=>l.cancelEdit&&l.cancelEdit(...t))},"취소"),e[7]||(e[7]=(0,r.Lk)("button",{type:"submit",class:"edit-btn"},"수정 완료",-1))])],32)])],64)}var tt={name:"EditPost",data(){return{title:"",content:"",postId:null,isLoggedIn:!!localStorage.getItem("currentUser")}},created(){this.loadPostData()},methods:{async loadPostData(){const t=parseInt(this.$route.params.id);this.postId=t;try{const e=await O.A.get(`http://localhost:3000/detail/${t}`),o=e.data.post;this.title=o.title,this.content=o.content,this.editor&&(this.editor.root.innerHTML=this.content)}catch(e){console.error("글을 찾을 수 없습니다:",e),this.$router.push("/list")}},async submitPost(){const t=JSON.parse(localStorage.getItem("currentUser"));if(!t)return alert("로그인이 필요합니다."),void this.$router.push("/login");this.content=this.editor.root.innerHTML;try{const e=await O.A.put(`http://localhost:3000/detail/${this.postId}`,{title:this.title,content:this.content},{headers:{"current-user":t.email}});console.log(e.data),alert("수정이 완료되었습니다."),this.$router.push("/list")}catch(e){console.error("글 수정 실패",e.response?.data||e.message),alert("수정에 실패했습니다. 다시 시도해주세요.")}},cancelEdit(){this.$router.push("/list")},logout(){localStorage.removeItem("user"),this.$router.push("/login")},goToUserLogin(){this.$router.push("/login")}},mounted(){this.editor=new R.Ay("#editor",{theme:"snow",placeholder:"내용을 입력하세요.",modules:{toolbar:[["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["link","image"],[{align:[]}],[{size:["small",!1,"large","huge"]}],[{color:[]},{background:[]}]]}}),this.content&&(this.editor.root.innerHTML=this.content)}};const et=(0,i.A)(tt,[["render",_],["__scopeId","data-v-7f4d7ce6"]]);var ot=et;const st={class:"container"},rt={class:"post-list-container"},at={class:"filter-container"},nt={class:"myPosts"},lt={class:"search-container"},it={class:"post-list"},ut={class:"author"},ct={class:"title"},dt={class:"date"},pt={class:"views"},gt={class:"pagination"},mt=["onClick"];function ht(t,e,o,a,n,l){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",st,[(0,r.Lk)("header",null,[(0,r.Lk)("h1",null,[(0,r.bF)(i,{to:"/",class:"blog_title"},{default:(0,r.k6)((()=>e[8]||(e[8]=[(0,r.eW)("BlogProject")]))),_:1})]),n.isLoggedIn?((0,r.uX)(),(0,r.CE)("button",{key:1,class:"logout-button",onClick:e[1]||(e[1]=(...t)=>l.logout&&l.logout(...t))},"로그아웃")):((0,r.uX)(),(0,r.CE)("button",{key:0,class:"action-button",onClick:e[0]||(e[0]=(...t)=>l.goToUserLogin&&l.goToUserLogin(...t))}," 로그인 "))]),(0,r.Lk)("div",rt,[e[13]||(e[13]=(0,r.Lk)("h2",{class:"post-list-title"},"글 목록",-1)),(0,r.Lk)("div",at,[(0,r.Lk)("div",nt,[(0,r.Lk)("label",null,[(0,r.bo)((0,r.Lk)("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=t=>n.filterMyPosts=t),onChange:e[3]||(e[3]=(...t)=>l.reloadPosts&&l.reloadPosts(...t))},null,544),[[s.lH,n.filterMyPosts]]),e[9]||(e[9]=(0,r.eW)(" 내가 쓴 글 "))])]),(0,r.Lk)("div",lt,[(0,r.Lk)("form",{onSubmit:e[6]||(e[6]=(0,s.D$)(((...t)=>l.searchPosts&&l.searchPosts(...t)),["prevent"]))},[e[11]||(e[11]=(0,r.Lk)("label",{for:"sc"},null,-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>n.searchType=t),name:"search",id:"sc"},e[10]||(e[10]=[(0,r.Lk)("option",{value:"title"},"제목",-1),(0,r.Lk)("option",{value:"name"},"작성자",-1)]),512),[[s.u1,n.searchType]]),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=t=>n.searchKeyword=t),placeholder:"검색어를 입력하세요",class:"search-input"},null,512),[[s.Jo,n.searchKeyword]]),e[12]||(e[12]=(0,r.Lk)("button",{type:"submit",class:"search-button"},"검색",-1))],32)])]),(0,r.Lk)("div",it,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.paginatedPosts,(t=>((0,r.uX)(),(0,r.CE)("div",{key:t.id,class:"post-item"},[(0,r.Lk)("span",ut,"글쓴이: "+(0,p.v_)(t.name),1),(0,r.bF)(i,{to:`/detail/${t.id}`},{default:(0,r.k6)((()=>[(0,r.Lk)("h2",ct,(0,p.v_)(t.title),1)])),_:2},1032,["to"]),(0,r.Lk)("span",dt,"작성일: "+(0,p.v_)(l.formatDate(t.created_at)),1),(0,r.Lk)("p",pt,"조회수: "+(0,p.v_)(t.views),1)])))),128))]),(0,r.Lk)("div",gt,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.totalPages,(t=>((0,r.uX)(),(0,r.CE)("button",{key:t,onClick:e=>l.changePage(t),class:(0,p.C4)([{active:n.currentPage===t},"pagination-btn"])},(0,p.v_)(t),11,mt)))),128))]),(0,r.Lk)("button",{type:"button",onClick:e[7]||(e[7]=(...t)=>l.createPost&&l.createPost(...t)),class:"create-post-btn"}," 글작성 ")])])}var vt={name:"PostList",data(){return{posts:[],currentPage:1,postPerPage:5,isLoggedIn:!!localStorage.getItem("currentUser"),filterMyPosts:!1,searchKeyword:"",searchType:"title"}},computed:{sortedPosts(){return[...this.posts].sort(((t,e)=>new Date(e.created_at)-new Date(t.created_at)))},paginatedPosts(){const t=(this.currentPage-1)*this.postPerPage,e=t+this.postPerPage;return this.sortedPosts.slice(t,e)},totalPages(){return Math.ceil(this.posts.length/this.postPerPage)}},methods:{async reloadPosts(){try{const t=localStorage.getItem("currentUser"),e=t?JSON.parse(t).email:null,o=await O.A.get("http://localhost:3000/list",{params:{myPostsOnly:this.filterMyPosts?"true":"false",currentUserEmail:e}});this.posts=o.data.sort(((t,e)=>new Date(e.created_at)-new Date(t.created_at))),this.currentPage=1}catch(t){console.error("게시물 불러오기 중 오류 발생:",t)}},async searchPosts(){if(this.searchKeyword.trim())try{const t=await O.A.get("http://localhost:3000/api/search",{params:{type:this.searchType,keyword:this.searchKeyword.trim()}});this.posts=t.data,this.currentPage=1}catch(t){console.error("검색 실패:",t.response?.data?.message||t.message),alert("검색 중 오류가 발생했습니다.")}else alert("검색어를 입력해주세요.")},createPost(){this.$router.push("/create")},logout(){localStorage.removeItem("currentUser"),this.$router.push("/login")},formatDate(t){if(!t)return"Invalid Date";const e=new Date(t.replace(" ","T"));if(isNaN(e.getTime()))return"Invalid Date";const o=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),a=String(e.getHours()).padStart(2,"0"),n=String(e.getMinutes()).padStart(2,"0");return`${o}-${s}-${r} ${a}:${n}`},changePage(t){this.currentPage=t},goToUserLogin(){this.$router.push("/login")}},mounted(){this.reloadPosts()}};const Lt=(0,i.A)(vt,[["render",ht],["__scopeId","data-v-98265466"]]);var bt=Lt,kt="data:image/jpeg;base64,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";const ft={class:"navbar"},yt={class:"container"},wt={class:"post-detail"},Pt={key:0},St=["innerHTML"],Xt={class:"button-container"},Ct={class:"comments-section"},It={class:"comments-list"},Ut={class:"comment-footer"},Dt=["onClick"],At=["onClick"];function Et(t,e,o,a,n,l){const i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",ft,[(0,r.Lk)("header",null,[(0,r.Lk)("h1",null,[(0,r.bF)(i,{to:"/",class:"blog_title"},{default:(0,r.k6)((()=>e[6]||(e[6]=[(0,r.eW)("BlogProject")]))),_:1})]),n.isLoggedIn?((0,r.uX)(),(0,r.CE)("button",{key:1,class:"logout-button",onClick:e[1]||(e[1]=(...t)=>l.logout&&l.logout(...t))},"로그아웃")):((0,r.uX)(),(0,r.CE)("button",{key:0,class:"logout-button",onClick:e[0]||(e[0]=(...t)=>l.goToUserLogin&&l.goToUserLogin(...t))}," 로그인 "))])]),(0,r.Lk)("div",yt,[(0,r.Lk)("div",wt,[n.post.title?((0,r.uX)(),(0,r.CE)("div",Pt,[(0,r.Lk)("h1",null,(0,p.v_)(n.post.title),1),(0,r.Lk)("p",null,[e[7]||(e[7]=(0,r.Lk)("strong",null,"글쓴이:",-1)),(0,r.eW)(" "+(0,p.v_)(n.post.name),1)]),(0,r.Lk)("p",null,[e[8]||(e[8]=(0,r.Lk)("strong",null,"작성일:",-1)),(0,r.eW)(" "+(0,p.v_)(n.post.created_at?l.formatDate(n.post.created_at):"작성일 정보 없음"),1)]),(0,r.Lk)("p",null,[e[9]||(e[9]=(0,r.Lk)("strong",null,"조회수:",-1)),(0,r.eW)(" "+(0,p.v_)(n.post.views),1)]),(0,r.Lk)("div",{innerHTML:n.post.content},null,8,St)])):(0,r.Q3)("",!0),(0,r.Lk)("div",Xt,[n.post.email===n.currentUserId?((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:e[2]||(e[2]=(...t)=>l.editPost&&l.editPost(...t)),class:"edit-btn"},"수정")):(0,r.Q3)("",!0),n.post.email===n.currentUserId?((0,r.uX)(),(0,r.CE)("button",{key:1,onClick:e[3]||(e[3]=(...t)=>l.deletePost&&l.deletePost(...t)),class:"delete-btn"},"삭제")):(0,r.Q3)("",!0)]),(0,r.Lk)("div",Ct,[(0,r.Lk)("h3",null,"댓글 "+(0,p.v_)(n.post.commentCount),1),(0,r.Lk)("form",{onSubmit:e[5]||(e[5]=(0,s.D$)(((...t)=>l.addComment&&l.addComment(...t)),["prevent"]))},[(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":e[4]||(e[4]=t=>n.newComment=t),placeholder:"댓글을 작성하시오",required:""},null,512),[[s.Jo,n.newComment]]),e[10]||(e[10]=(0,r.Lk)("button",{type:"submit"},"댓글 작성",-1))],32),(0,r.Lk)("div",It,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.comments,(t=>((0,r.uX)(),(0,r.CE)("div",{key:t.id,class:"comment-item"},[(0,r.Lk)("p",null,(0,p.v_)(t.content),1),(0,r.Lk)("div",Ut,[(0,r.Lk)("small",null,"작성자 : "+(0,p.v_)(t.username)+" | "+(0,p.v_)(t.createdAt),1),(0,r.Lk)("button",{onClick:e=>l.toggleLike(t.id),class:"like-button"},[(0,r.Lk)("span",null,(0,p.v_)(t.isLiked?"❤️":"🤍"),1),(0,r.eW)(" "+(0,p.v_)(t.likesCount),1)],8,Dt),t.userId===n.currentUserId?((0,r.uX)(),(0,r.CE)("img",{key:0,src:kt,alt:"삭제",class:"delete-icon",onClick:e=>l.deleteComment(t.id)},null,8,At)):(0,r.Q3)("",!0)])])))),128))])])])])],64)}o(8992),o(4520),o(2577),o(1454);O.A.defaults.baseURL="http://localhost:3000";var Ot={props:{postId:{type:[String,Number],required:!0},id:{type:[String,Number],required:!0}},data(){return{comments:[],newComment:"",currentUserId:JSON.parse(localStorage.getItem("currentUser"))?.email||null,post:{},isLoggedIn:!!localStorage.getItem("currentUser")}},created(){this.getPostDetail(),this.fetchComments(),console.log("현재 사용자 ID:",this.currentUserId)},methods:{async toggleLike(t){const e=this.comments.find((e=>e.id===t));if(e)try{const o=await O.A.post(`/api/comments/${t}/likes`,{userId:this.currentUserId});o.data.message.includes("추가")?(e.isLiked=!0,e.likesCount+=1):o.data.message.includes("취소")&&(e.isLiked=!1,e.likesCount-=1)}catch(o){console.error("좋아요 처리 중 오류:",o.response?.data||o.message)}},async addLike(t){try{const e=await O.A.post(`/api/comments/${t}/likes`,{userId:this.currentUserId});if("이미 좋아요를 눌렀습니다."===e.data.message)return void console.log("이미 좋아요를 눌렀습니다.")}catch(e){console.error("좋아요 추가 실패:",e.response?.data||e.message),alert(e.response?.data?.message||"좋아요 추가에 실패했습니다.")}},async removeLike(t){try{await O.A.delete(`/api/comments/${t}/likes`,{data:{userId:this.currentUserId}})}catch(e){console.error("좋아요 취소 실패:",e.response?.data||e.message),alert(e.response?.data?.message||"좋아요 취소에 실패했습니다.")}},async getPostDetail(){const t=parseInt(this.$route.params.id);if(isNaN(t))return console.error("잘못된 게시물 ID:",this.$route.params.id),void this.$router.push("/list");try{const e=await O.A.get(`http://localhost:3000/detail/${t}`);this.post=e.data.post,await this.incrementViewCount(t)}catch(e){console.error("게시물 불러오기 중 오류 발생:",e.response?e.response.data:e.message),this.$router.push("/list")}},async fetchComments(){try{const e=await O.A.get(`http://localhost:3000/comments/${this.$route.params.id}`);this.comments=e.data.map((t=>({id:t.id,userId:t.userId,username:t.userId,createdAt:this.formatDate(t.createdAt),content:t.content,isLiked:!1,likesCount:0})));for(const o of this.comments)try{const t=await O.A.get(`/api/comments/${o.id}/likes`,{params:{userId:this.currentUserId}});o.isLiked=t.data.isLiked,o.likesCount=t.data.likesCount}catch(t){console.error(`좋아요 데이터 가져오기 실패 (댓글 ID: ${o.id}):`,t.message)}}catch(t){console.error("댓글 불러오기 실패:",t.response?.data||t.message)}},async addComment(){try{const t=JSON.parse(localStorage.getItem("currentUser"));if(!t||!t.email)throw new Error("사용자 정보가 없습니다.");const e=await O.A.post(`http://localhost:3000/comments/${this.$route.params.id}`,{postId:this.$route.params.id,content:this.newComment,userEmail:t.email});this.comments.push({id:e.data.id,userId:e.data.username,username:e.data.username,createdAt:this.formatDate(e.data.createdAt),content:e.data.content,isLiked:!1,likesCount:0}),this.newComment=""}catch(t){console.error("댓글 작성 실패:",t.response?.data||t.message),alert("댓글 작성에 실패했습니다. 다시 시도해주세요.")}},async deleteComment(t){alert("정말 이 댓글을 삭제하시겠습니까?");try{const e=localStorage.getItem("token"),o=JSON.parse(localStorage.getItem("currentUser"));if(!o||!o.email)throw new Error("사용자 정보가 없습니다.");const s=o.email;await O.A.delete(`http://localhost:3000/comments/${t}`,{headers:{Authorization:`Bearer ${e}`,"current-user":s}}),this.comments=this.comments.filter((e=>e.id!==t))}catch(e){console.log("댓글 삭제 실패:",e.response?.data||e.message)}},async incrementViewCount(t){try{await O.A.put(`http://localhost:3000/detail/${t}/views`)}catch(e){console.error("조회수 증가 에러 발생:",e.response?e.response.data:e.message)}},editPost(){const t=localStorage.getItem("currentUser");if(!t)return alert("로그인이 필요합니다."),void this.$router.push("/login");this.$router.push(`/edit/${this.post.id}`)},logout(){localStorage.removeItem("user"),this.$router.push("/login")},goToUserLogin(){this.$router.push("/login")},async deletePost(){if(confirm("정말 이 글을 삭제하시겠습니까?"))try{const t=JSON.parse(localStorage.getItem("currentUser")),e=t.email;console.log(e),console.log("storedUserEmail: ",t.email),await O.A.delete(`http://localhost:3000/detail/${this.post.id}`,{headers:{"current-user":e}}),alert("게시물이 삭제되었습니다."),this.$router.push("/list")}catch(t){console.error("게시물 삭제 중 오류 발생:",t.response?.data||t.message),alert("게시물 삭제에 실패했습니다."),403===t.response?.status?alert("삭제 권한이 없습니다."):alert("게시물 삭제에 실패했습니다.")}},formatDate(t){const e=new Date(t),o=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),a=String(e.getHours()).padStart(2,"0"),n=String(e.getMinutes()).padStart(2,"0");return`${o}-${s}-${r} ${a}:${n}`}},mounted(){this.fetchComments()}};const Nt=(0,i.A)(Ot,[["render",Et],["__scopeId","data-v-e1fb8d60"]]);var Vt=Nt;const Ft=[{path:"/",name:"Home",component:I},{path:"/login",name:"Login",component:F},{path:"/signup",name:"SignUp",component:W},{path:"/create",name:"CreatePost",component:z},{path:"/edit/:id",name:"EditPost",component:ot,props:!0},{path:"/list",name:"PostList",component:bt},{path:"/detail/:id",name:"PostDetail",component:Vt,props:!0}],Jt=(0,d.aE)({history:(0,d.LA)("/"),routes:Ft});var Ht=Jt;const Tt=(0,s.Ef)(c);Tt.use(Ht),Tt.mount("#app")}},e={};function o(s){var r=e[s];if(void 0!==r)return r.exports;var a=e[s]={id:s,loaded:!1,exports:{}};return t[s].call(a.exports,a,a.exports,o),a.loaded=!0,a.exports}o.m=t,function(){var t=[];o.O=function(e,s,r,a){if(!s){var n=1/0;for(c=0;c<t.length;c++){s=t[c][0],r=t[c][1],a=t[c][2];for(var l=!0,i=0;i<s.length;i++)(!1&a||n>=a)&&Object.keys(o.O).every((function(t){return o.O[t](s[i])}))?s.splice(i--,1):(l=!1,a<n&&(n=a));if(l){t.splice(c--,1);var u=r();void 0!==u&&(e=u)}}return e}a=a||0;for(var c=t.length;c>0&&t[c-1][2]>a;c--)t[c]=t[c-1];t[c]=[s,r,a]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var s in e)o.o(e,s)&&!o.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){o.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={524:0};o.O.j=function(e){return 0===t[e]};var e=function(e,s){var r,a,n=s[0],l=s[1],i=s[2],u=0;if(n.some((function(e){return 0!==t[e]}))){for(r in l)o.o(l,r)&&(o.m[r]=l[r]);if(i)var c=i(o)}for(e&&e(s);u<n.length;u++)a=n[u],o.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return o.O(c)},s=self["webpackChunkblogproject"]=self["webpackChunkblogproject"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=o.O(void 0,[504],(function(){return o(964)}));s=o.O(s)})();
//# sourceMappingURL=app.837cc602.js.map